# ๐ ุฎูุงุตู ุชุบุฑุงุช ุฑุจุงุช ุชูฺฏุฑุงู

## โ ฺฉุงุฑูุง ุงูุฌุงู ุดุฏู

### 1๏ธโฃ ุฑูุน ูุดฺฉู ููุงุด ูุฑุจุน ูุชู ูุงุฑุณ
**ูุดฺฉู**: ุฑุจุงุช ูุชู ูุงุฑุณ ุฑุง ุจู ุตูุฑุช ูุฑุจุนโูุง ุฎุงู ููุงุด ูโุฏุงุฏ.

**ุนูุช**: ุฑุจุงุช ููโุฏุงูุณุช ูููุชโูุง ูุงุฑุณ ฺฉุฌุง ูุณุชูุฏ ู ุงุฒ ูููุช ูพุดโูุฑุถ ุณุณุชู ุงุณุชูุงุฏู ูโฺฉุฑุฏ ฺฉู ูุงุฑุณ ุฑุง ูพุดุชุจุงู ููโฺฉุฑุฏ.

**ุฑุงูโุญู**:
- โ ุฏุงูููุฏ ู ุงุถุงูู ฺฉุฑุฏู ูููุชโูุง ูุงุฑุณ (Vazirmatn)
- โ ุฏุงูููุฏ ู ุงุถุงูู ฺฉุฑุฏู ูููุชโูุง ุงูฺฏูุณ (Roboto)
- โ ุงุฌุงุฏ ุณุณุชู ุชุดุฎุต ุฎูุฏฺฉุงุฑ ุฒุจุงู
- โ ุงูุชุฎุงุจ ุฎูุฏฺฉุงุฑ ูููุช ููุงุณุจ ุจุฑ ุงุณุงุณ ุฒุจุงู

### 2๏ธโฃ ุชุดุฎุต ุฎูุฏฺฉุงุฑ ุฒุจุงู
ุฑุจุงุช ุญุงูุง ูโุชูุงูุฏ:
- ๐ ุชุดุฎุต ุฏูุฏ ูุชู ูุงุฑุณ ุงุณุช ุง ุงูฺฏูุณ
- ๐จ ูููุช ููุงุณุจ ุฑุง ุจุฑ ุงุณุงุณ ุฒุจุงู ุงูุชุฎุงุจ ฺฉูุฏ
- ๐ ุจุง ูุชูโูุง ุชุฑฺฉุจ (ูุงุฑุณ + ุงูฺฏูุณ) ฺฉุงุฑ ฺฉูุฏ

**ูุญูู ฺฉุงุฑ**:
```python
# ุงฺฏุฑ ุจุด ุงุฒ 30% ฺฉุงุฑุงฺฉุชุฑูุง ูุงุฑุณ ุจุงุดูุฏ โ ูููุช ูุงุฑุณ
# ุฏุฑ ุบุฑ ุงู ุตูุฑุช โ ูููุช ุงูฺฏูุณ
```

### 3๏ธโฃ ุจุฎุด ุงุดุชุฑุงฺฉ ู ูพููโูุง ููุชโฺฏุฐุงุฑ
ุฏฺฉูู "ุงุดุชุฑุงฺฉ / ูุธุฑุณูุฌ" ุญุงูุง ุฏู ุจุฎุด ุฏุงุฑุฏ:

#### ๐ ูุธุฑุณูุฌ
- ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ูุธุฑ ุฎูุฏ ุฑุง ุฏุฑุจุงุฑู ุงุถุงูู ุดุฏู ุงุดุชุฑุงฺฉ ุซุจุช ฺฉููุฏ
- ูุดุงูุฏู ุขูุงุฑ ูุธุฑุงุช (ุจูู/ุฎุฑ)

#### ๐ ูพููโูุง ุงุดุชุฑุงฺฉ
ููุงุด ูพููโูุง ุงุดุชุฑุงฺฉ ุจุง ููุชโูุง ุฒุฑ:
- **ฺฉ ูุงูู**: ฒฐ,ฐฐฐ ุชููุงู
- **ุณู ูุงูู**: ณฐ,ฐฐฐ ุชููุงู (ตฐูช ุชุฎูู!)
- **ุดุด ูุงูู**: ถฐ,ฐฐฐ ุชููุงู

**ูุฒุงุง ุงุดุชุฑุงฺฉ**:
- โจ ุงุณุชูุงุฏู ูุงูุญุฏูุฏ ุงุฒ ุฑุจุงุช
- ๐จ ุฏุณุชุฑุณ ุจู ุชูุงู ูููุชโูุง ู ูุงูุจโูุง
- ๐ ุณุฑุนุช ุจุงูุงุชุฑ ุฏุฑ ุณุงุฎุช ุงุณุชฺฉุฑ
- ๐ฏ ูพุดุชุจุงู ุงุฎุชุตุงุต

**ููฺฉ ุฎุฑุฏ**: ุฏฺฉูู ูุณุชูู ุจู @onedaytoalive

## ๐ ูุงูโูุง ุงุถุงูู ุดุฏู

```
fonts/
โโโ Vazirmatn-Regular.ttf    (120 KB) - ูููุช ูุงุฑุณ
โโโ Vazirmatn-Medium.ttf     (120 KB) - ูููุช ูุงุฑุณ
โโโ Roboto-Regular.ttf       (504 KB) - ูููุช ุงูฺฏูุณ
โโโ Roboto-Medium.ttf        (500 KB) - ูููุช ุงูฺฏูุณ

test_language_detection.py   - ูุงู ุชุณุช
download_fonts_auto.py        - ุงุณฺฉุฑูพุช ุฏุงูููุฏ ูููุชโูุง
CHANGES.md                    - ูุณุชูุฏุงุช ุชุบุฑุงุช
```

## ๐ง ุชุบุฑุงุช ฺฉุฏ

### ุชุงุจุน ุฌุฏุฏ: `_detect_language()`
```python
def _detect_language(text: str) -> str:
    """ุชุดุฎุต ุฒุจุงู ูุชู (ูุงุฑุณ ุง ุงูฺฏูุณ)"""
    # ุดูุงุฑุด ฺฉุงุฑุงฺฉุชุฑูุง ูุงุฑุณ ู ุงูฺฏูุณ
    # ุงฺฏุฑ ุจุด ุงุฒ 30% ูุงุฑุณ โ "persian"
    # ุฏุฑ ุบุฑ ุงู ุตูุฑุช โ "english"
```

### ุชุงุจุน ุจูุจูุฏ ุงูุชู: `resolve_font_path()`
```python
def resolve_font_path(font_key: Optional[str], text: str = "") -> str:
    """ุงูุชุฎุงุจ ูููุช ููุงุณุจ ุจุฑ ุงุณุงุณ ุฒุจุงู ูุชู"""
    # ุงฺฏุฑ ูููุช ูุดุฎุต ุดุฏู โ ุงุณุชูุงุฏู ุงุฒ ุขู
    # ุงฺฏุฑ ูู โ ุชุดุฎุต ุฒุจุงู ู ุงูุชุฎุงุจ ูููุช ููุงุณุจ
```

### ุชุงุจุน ุจูุจูุฏ ุงูุชู: `_prepare_text()`
```python
def _prepare_text(text: str) -> str:
    # ุชุดุฎุต ุฒุจุงู
    lang = _detect_language(text)
    
    # ููุท ุจุฑุง ูุงุฑุณ ุงุฒ reshaper ุงุณุชูุงุฏู ูโุดูุฏ
    if lang == "persian":
        # arabic_reshaper + bidi
    else:
        # ููุท strip
```

## ๐งช ุชุณุชโูุง

ุชุณุชโูุง ุงูุฌุงู ุดุฏู:
```bash
$ python3 test_language_detection.py

=== ุชุณุช ุชุดุฎุต ุฒุจุงู ===
โ ูุชู: 'ุณูุงู ุฏูุง' -> ุฒุจุงู: persian
โ ูุชู: 'Hello World' -> ุฒุจุงู: english
โ ูุชู: 'ุงู ฺฉ ูุชู ูุงุฑุณ ุงุณุช' -> ุฒุจุงู: persian
โ ูุชู: 'This is an English text' -> ุฒุจุงู: english

=== ุชุณุช ุงูุชุฎุงุจ ูููุช ===
ูุชู: 'ุณูุงู ุฏูุง' -> ุฒุจุงู: persian -> ูููุช: Vazirmatn-Regular.ttf
ูุชู: 'Hello World' -> ุฒุจุงู: english -> ูููุช: Roboto-Regular.ttf

โ ุชุณุชโูุง ุจุง ููููุช ุงุฌุฑุง ุดุฏูุฏ!
```

## ๐ Pull Request

Pull Request ุจุง ููููุช ุงุฌุงุฏ ุดุฏ:
- **ููฺฉ**: https://github.com/redox121223233/mybot/pull/3
- **ุจุฑูฺ**: `feature/font-detection-and-subscription`
- **ูุถุนุช**: ุขูุงุฏู ุจุฑุง Review ู Merge

## ๐ ูุฑุงุญู ุจุนุฏ

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุชุบุฑุงุช:

1. **Review ฺฉุฑุฏู PR**:
   - ุจุฑุฑุณ ุชุบุฑุงุช ุฏุฑ GitHub
   - ุชุณุช ฺฉุฑุฏู ุฏุฑ ูุญุท development

2. **Merge ฺฉุฑุฏู**:
   - ุงฺฏุฑ ููู ฺุฒ OK ุจูุฏุ PR ุฑุง merge ฺฉูุฏ
   - ุง ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:
   ```bash
   gh pr merge 3 --merge
   ```

3. **Deploy ฺฉุฑุฏู**:
   ```bash
   git pull origin main
   sudo systemctl restart telegram-bot
   ```

## ๐ฏ ูุชุฌู

โ ูุดฺฉู ููุงุด ูุฑุจุน ูุชู ูุงุฑุณ **ุจุฑุทุฑู ุดุฏ**
โ ุณุณุชู ุชุดุฎุต ุฎูุฏฺฉุงุฑ ุฒุจุงู **ุงุถุงูู ุดุฏ**
โ ูููุชโูุง ูุงุฑุณ ู ุงูฺฏูุณ **ูุตุจ ุดุฏูุฏ**
โ ุจุฎุด ูพููโูุง ุงุดุชุฑุงฺฉ **ุงุฌุงุฏ ุดุฏ**
โ ููฺฉ ุจู ูพุดุชุจุงู (@onedaytoalive) **ุงุถุงูู ุดุฏ**

## ๐ ุงุทูุงุนุงุช ุชูุงุณ

- **ูพุดุชุจุงู**: @onedaytoalive
- **ฺฉุงูุงู**: @redoxbot_sticker
- **Repository**: https://github.com/redox121223233/mybot

---

**ุชุงุฑุฎ**: 2025-10-09
**ุชูุณุนูโุฏููุฏู**: NinjaTech AI Bot